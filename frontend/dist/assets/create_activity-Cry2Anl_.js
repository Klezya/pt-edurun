import{s as h,g as C,d as B,r as u,o as M,c,a as e,i as T,f as p,b as g,t as x,z as I,n as w,v as y,A as k,u as S,k as v,_ as V}from"./index-CDvAvbTk.js";import{b as D}from"./index-DP5mw_I0.js";import{c as _,p as P,o as z}from"./index-UlJKtRD1.js";async function j(n){return await fetch(`${h.apiBaseUrl}/lti/course/${n}`).then(o=>o.json())}async function N(n){const i=await C(),o=await j(i.id);if("error"in o)throw new Error(o.error);const a={id_curso:o.id,...n};console.log("Payload para crear evaluaci贸n:",a);const s=await fetch(`${h.apiBaseUrl}/api/evaluacion`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){const r=await s.json().catch(()=>({detail:"Error al crear la evaluaci贸n"}));throw new Error(r.detail||"Error al crear la evaluaci贸n")}return s.json()}async function $(n){const i=await C(),o=await j(i.id);if("error"in o)throw new Error(o.error);const a={id_curso:o.id,...n};console.log("Payload para crear tarea:",a);const s=await fetch(`${h.apiBaseUrl}/api/tarea`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){const r=await s.json().catch(()=>({detail:"Error al crear la tarea"}));throw new Error(r.detail||"Error al crear la tarea")}return s.json()}const U={class:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900"},q={class:"relative flex min-h-screen flex-col"},O={class:"flex flex-grow items-start justify-center px-4 py-8"},A={class:"mx-auto max-w-7xl w-full"},H={key:0,class:"mb-6 rounded-xl border border-green-500/20 bg-green-950/40 backdrop-blur-md p-4"},L={class:"flex items-center gap-3"},J={class:"text-green-200 font-medium"},G={key:1,class:"mb-6 rounded-xl border border-red-500/20 bg-red-950/40 backdrop-blur-md p-4"},R={class:"flex items-center gap-3"},F={class:"text-red-200 font-medium"},K={class:"rounded-2xl border border-white/10 bg-slate-950/40 backdrop-blur-md shadow-2xl overflow-hidden"},Q={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},W={class:"space-y-6"},X={class:"space-y-2"},Y={class:"flex items-center gap-4 p-4 rounded-lg bg-slate-900/50 border border-white/10"},Z={class:"space-y-2"},ee={class:"space-y-2"},te={class:"space-y-4"},oe={class:"space-y-3"},se={class:"flex items-center justify-end gap-4 pt-8 mt-8 border-t border-white/10"},ae=["disabled"],re={key:0,class:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},le={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ne=B({__name:"create_activity",setup(n){const i=S(),o=u({titulo:"",contenido:"",test:"",tipo:"tarea"}),a=u(!1),s=u(""),r=u(""),b=u(null);let f=null;M(()=>{b.value&&(f=new _({doc:o.value.test||"",extensions:[D,P(),z,_.updateListener.of(l=>{l.docChanged&&(o.value.test=l.state.doc.toString())})],parent:b.value}))});const E=async()=>{if(s.value="",r.value="",!o.value.titulo||!o.value.contenido){s.value="Por favor complete todos los campos obligatorios";return}a.value=!0;try{const l={titulo:o.value.titulo,contenido:o.value.contenido,test:o.value.test||null};o.value.tipo==="evaluacion"?(await N(l),r.value="Evaluaci贸n creada exitosamente"):(await $(l),r.value="Tarea creada exitosamente"),setTimeout(()=>{m()},2e3)}catch(l){console.error("Error al crear:",l),s.value=l instanceof Error?l.message:`Error al crear la ${o.value.tipo}`}finally{a.value=!1}},m=()=>{o.value={titulo:"",contenido:"",test:"",tipo:"tarea"},s.value="",r.value="",f&&f.destroy(),i.back()};return(l,t)=>(v(),c("div",U,[t[16]||(t[16]=e("div",{class:"absolute inset-0 overflow-hidden pointer-events-none"},[e("div",{class:"absolute top-20 left-10 w-72 h-72 bg-sky-500/10 rounded-full blur-3xl"}),e("div",{class:"absolute bottom-20 right-10 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"})],-1)),e("div",q,[e("header",{class:"border-b border-white/10 bg-slate-950/30 backdrop-blur-sm shadow-lg"},[e("div",{class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},[e("div",{class:"flex h-20 items-center justify-between"},[t[5]||(t[5]=T('<div class="flex items-center gap-3" data-v-7d48a274><div class="bg-gradient-to-br from-sky-400 to-blue-600 p-2 rounded-xl shadow-lg" data-v-7d48a274><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7d48a274><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" data-v-7d48a274></path></svg></div><div data-v-7d48a274><h1 class="text-2xl font-bold bg-gradient-to-r from-sky-400 to-blue-500 bg-clip-text text-transparent" data-v-7d48a274> Crear Nueva Evaluaci贸n </h1><p class="text-sm text-slate-400" data-v-7d48a274>Completa los datos de la evaluaci贸n</p></div></div>',1)),e("div",{class:"flex items-center gap-3"},[e("button",{onClick:m,class:"inline-flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium text-slate-200 hover:bg-white/10 hover:text-white transition-all duration-200 hover:scale-105"},t[4]||(t[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),p(" Volver ",-1)]))])])])]),e("main",O,[e("div",A,[r.value?(v(),c("div",H,[e("div",L,[t[6]||(t[6]=e("svg",{class:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",J,x(r.value),1)])])):g("",!0),s.value?(v(),c("div",G,[e("div",R,[t[7]||(t[7]=e("svg",{class:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",F,x(s.value),1)])])):g("",!0),e("div",K,[e("form",{onSubmit:I(E,["prevent"]),class:"p-8"},[e("div",Q,[e("div",W,[t[11]||(t[11]=e("h2",{class:"text-xl font-semibold text-slate-100 border-b border-white/10 pb-3"}," Informaci贸n General ",-1)),e("div",X,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-slate-200"},[p(" Tipo de Actividad "),e("span",{class:"text-red-400"},"*")],-1)),e("div",Y,[e("button",{type:"button",onClick:t[0]||(t[0]=d=>o.value.tipo="tarea"),class:w(["flex-1 px-4 py-3 rounded-lg font-medium transition-all duration-200",o.value.tipo==="tarea"?"bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-500/30":"bg-slate-800/50 text-slate-400 hover:bg-slate-800 hover:text-slate-200"])},"  Tarea ",2),e("button",{type:"button",onClick:t[1]||(t[1]=d=>o.value.tipo="evaluacion"),class:w(["flex-1 px-4 py-3 rounded-lg font-medium transition-all duration-200",o.value.tipo==="evaluacion"?"bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-500/30":"bg-slate-800/50 text-slate-400 hover:bg-slate-800 hover:text-slate-200"])},"  Evaluaci贸n ",2)])]),e("div",Z,[t[9]||(t[9]=e("label",{for:"titulo",class:"block text-sm font-medium text-slate-200"},[p(" T铆tulo "),e("span",{class:"text-red-400"},"*")],-1)),y(e("input",{id:"titulo","onUpdate:modelValue":t[2]||(t[2]=d=>o.value.titulo=d),type:"text",required:"",placeholder:"Ingrese el t铆tulo",class:"w-full rounded-lg border border-white/10 bg-slate-900/50 px-4 py-3 text-slate-100 placeholder:text-slate-500 focus:border-sky-500/50 focus:outline-none focus:ring-2 focus:ring-sky-500/20 transition-all"},null,512),[[k,o.value.titulo]])]),e("div",ee,[t[10]||(t[10]=e("label",{for:"contenido",class:"block text-sm font-medium text-slate-200"},[p(" Descripci贸n "),e("span",{class:"text-red-400"},"*")],-1)),y(e("textarea",{id:"contenido","onUpdate:modelValue":t[3]||(t[3]=d=>o.value.contenido=d),rows:"8",required:"",placeholder:"Ingrese la descripci贸n y detalles de la actividad",class:"w-full rounded-lg border border-white/10 bg-slate-900/50 px-4 py-3 text-slate-100 placeholder:text-slate-500 focus:border-sky-500/50 focus:outline-none focus:ring-2 focus:ring-sky-500/20 transition-all resize-vertical"},null,512),[[k,o.value.contenido]])])]),e("div",te,[t[13]||(t[13]=e("div",{class:"flex items-center justify-between border-b border-white/10 pb-3"},[e("h2",{class:"text-xl font-semibold text-slate-100"}," C贸digo de Prueba (Pytest) "),e("span",{class:"text-slate-500 text-xs"},"(opcional)")],-1)),e("div",oe,[t[12]||(t[12]=e("p",{class:"text-slate-400 text-sm flex items-start gap-2"},[e("svg",{class:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",null," Escriba el c贸digo de prueba Pytest que se ejecutar谩 para evaluar las entregas de los estudiantes. Deje vac铆o si no requiere pruebas automatizadas. ")],-1)),e("div",{ref_key:"editorContainer",ref:b,class:"rounded-lg border border-white/10 overflow-hidden shadow-lg",style:{height:"500px"}},null,512)])])]),e("div",se,[e("button",{type:"button",onClick:m,class:"rounded-lg px-6 py-3 text-sm font-medium text-slate-200 hover:bg-white/10 transition-all duration-200 hover:scale-105"}," Cancelar "),e("button",{type:"submit",disabled:a.value,class:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-sky-500 to-blue-600 px-6 py-3 text-sm font-medium text-white shadow-lg shadow-sky-500/30 transition-all duration-200 hover:scale-105 hover:shadow-sky-500/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100"},[a.value?(v(),c("svg",re,t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(v(),c("svg",le,t[15]||(t[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))),p(" "+x(a.value?"Creando...":o.value.tipo==="tarea"?"Crear Tarea":"Crear Evaluaci贸n"),1)],8,ae)])],32)])])])])]))}}),ce=V(ne,[["__scopeId","data-v-7d48a274"]]);export{ce as default};
